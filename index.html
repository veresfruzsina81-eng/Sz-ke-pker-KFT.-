<!doctype html>
<html lang="hu">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Sz≈ëke √âpker KFT.</title>
  <link rel="stylesheet" href="styles.css" />
</head>
<body>

  <!-- FEJL√âC -->
  <header class="site-header">
    <div class="container header-inner">
      <a href="#fooldal" class="brand">
        <img src="logo.png" alt="Sz≈ëke √âpker KFT. log√≥" />
        <span class="brand-text">Sz≈ëke √âpker KFT.</span>
      </a>
      <nav class="main-nav">
        <a href="#fooldal">F≈ëoldal</a>
        <a href="#szolgaltatasok">Szolg√°ltat√°sok</a>
        <a href="#rolunk">R√≥lunk</a>
        <a href="#bemutatkozas">Bemutatkoz√°s</a>
        <a href="#referenciak">Referenci√°k</a>
        <a href="#ajanlatkeres">Aj√°nlatk√©r√©s</a>
        <a href="#kapcsolat" class="pill">Kapcsolat</a>
        <!-- SHOP: √∫j men√ºpont -->
        <a href="#webshop" class="pill">Webshop</a>
      </nav>

      <!-- SHOP: fix kos√°r gomb (css-ben fixre tessz√ºk, nem bor√≠tja a layoutot) -->
      <button class="shop-cart-toggle" aria-label="Kos√°r megnyit√°sa">üõí <span id="shopCartCount">0</span></button>
    </div>
  </header>

  <main>

    <!-- HERO (markol√≥s h√°tt√©r) -->
    <section id="fooldal" class="section hero bg-2">
      <div class="container hero-grid reveal-from-left">
        <div class="hero-copy">
          <span class="chip">Orsz√°g b√°rmely pontj√°n</span>
          <h1>Min≈ës√©g kompromisszumok n√©lk√ºl</h1>
          <p>Gener√°lkivitelez√©s, csal√°di h√°zak √©s t√°rsash√°zak √©p√≠t√©se, fel√∫j√≠t√°sok, homlokzati
            szigetel√©s, t√©rk√∂vez√©s, burkol√°s √©s fest√©s ‚Äì pontos hat√°rid≈ëk, √°tl√°that√≥ aj√°nlat.</p>
          <div class="cta-row">
            <a href="#ajanlatkeres" class="btn primary">Ingyenes aj√°nlatk√©r√©s</a>
            <a href="#referenciak" class="btn">Referenci√°k</a>
          </div>
        </div>
        <div class="hero-media">
          <img src="hero.jpg" alt="Sz≈ëke √âpker csapat munka k√∂zben" class="hero-img"/>
          <img src="logo.png" alt="" class="hero-watermark" />
        </div>
      </div>
    </section>

    <!-- SZOLG√ÅLTAT√ÅSAINK ... (v√°ltozatlan) -->

    <!-- R√ìLUNK ... (v√°ltozatlan) -->

    <!-- BEMUTATKOZ√ÅS ... (v√°ltozatlan) -->

    <!-- MI√âRT V√ÅLASSZON MINKET? ... (v√°ltozatlan) -->

    <!-- REFERENCI√ÅK ... (v√°ltozatlan) -->

    <!-- AJ√ÅNLATK√âR√âS ... (v√°ltozatlan) -->

    <!-- SHOP: WEBHOP SZEKCI√ì ‚Äì minta term√©kek 0 Ft-tal -->
    <section id="webshop" class="section soft-bg">
      <div class="container reveal-from-left">
        <h2 class="section-title">Webshop (minta)</h2>
        <p class="lead">A t√©nyleges term√©kek √©rkez√©s√©ig minta t√©telekkel tesztelhet≈ë a kos√°r √©s a rendel√©s (ut√°nv√©t, email √©rtes√≠t√©s).</p>

        <div class="shop-products">
          <!-- Minta k√°rty√°k ‚Äì a val√≥di term√©klist√°n√°l csak az adatokat cser√©lj√ºk -->
          <div class="shop-product-card">
            <img src="https://via.placeholder.com/320x200" alt="Minta term√©k 1">
            <h3>Minta term√©k 1</h3>
            <p>R√∂vid le√≠r√°s‚Ä¶</p>
            <div class="shop-product-row">
              <strong>0 Ft</strong>
              <button class="shop-btn" data-add-to-cart data-id="sku-1">Kos√°rba</button>
            </div>
          </div>

          <div class="shop-product-card">
            <img src="https://via.placeholder.com/320x200" alt="Minta term√©k 2">
            <h3>Minta term√©k 2</h3>
            <p>R√∂vid le√≠r√°s‚Ä¶</p>
            <div class="shop-product-row">
              <strong>0 Ft</strong>
              <button class="shop-btn" data-add-to-cart data-id="sku-2">Kos√°rba</button>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- KAPCSOLAT ... (v√°ltozatlan) -->

  </main>

  <footer class="site-footer">
    <div class="container">
      <p>¬© 2025 Sz≈ëke √âpker KFT. Minden jog fenntartva.</p>
    </div>
  </footer>

  <!-- SHOP: KOS√ÅR OLDALS√ÅV -->
  <aside class="shop-cart" aria-hidden="true">
    <div class="shop-cart__head">
      <h3>Kos√°r</h3>
      <button type="button" class="shop-cart__close" aria-label="Kos√°r bez√°r√°sa">√ó</button>
    </div>
    <div class="shop-cart__items" id="shopCartItems"></div>
    <div class="shop-cart__footer">
      <div class="shop-cart__row">
        <span>R√©sz√∂sszeg:</span><strong id="shopSubtotal">0 Ft</strong>
      </div>
      <button class="shop-btn" id="shopGoCheckout">Tov√°bb a p√©nzt√°rhoz</button>
    </div>
  </aside>

  <!-- SHOP: P√âNZT√ÅR MOD√ÅL + NETLIFY FORMS (ut√°nv√©t, email) -->
  <div class="shop-checkout" aria-hidden="true" id="shopCheckout">
    <div class="shop-checkout__card">
      <button class="shop-checkout__close" aria-label="P√©nzt√°r bez√°r√°sa">√ó</button>
      <h3>Rendel√©s lead√°sa (ut√°nv√©t)</h3>

      <!-- Netlify Forms: a bek√ºld√©sek a Netlifyban t√°rol√≥dnak + email √©rtes√≠t√©s be√°ll√≠that√≥ -->
      <form name="webshop-order" method="POST" data-netlify="true" netlify-honeypot="bot-field">
        <input type="hidden" name="form-name" value="webshop-order" />
        <p class="hidden">
          <label>Ne t√∂ltsd ki: <input name="bot-field" /></label>
        </p>

        <!-- A kos√°r tartalma ide ker√ºl JSON-k√©nt elk√ºld√©s el≈ëtt -->
        <textarea name="order_json" id="orderJson" style="display:none;"></textarea>

        <div class="shop-grid">
          <label>
            N√©v *
            <input name="name" required />
          </label>
          <label>
            E-mail *
            <input type="email" name="email" required />
          </label>
          <label>
            Telefon *
            <input type="tel" name="phone" required />
          </label>
          <label class="shop-grid--full">
            Sz√°ll√≠t√°si c√≠m *
            <input name="address" placeholder="Ir√°ny√≠t√≥sz√°m, v√°ros, utca, h√°zsz√°m" required />
          </label>
          <label>
            Fizet√©s m√≥dja
            <input value="Ut√°nv√©t" name="payment" readonly />
          </label>
          <label>
            Sz√°ll√≠t√°s
            <select name="shipping" id="shippingSelect">
              <option value="H√°zhozsz√°ll√≠t√°s">H√°zhozsz√°ll√≠t√°s</option>
              <option value="Szem√©lyes √°tv√©tel">Szem√©lyes √°tv√©tel</option>
            </select>
          </label>
          <label class="shop-grid--full">
            Megjegyz√©s
            <textarea name="note" rows="3" placeholder="Egy√©b k√©r√©s..."></textarea>
          </label>
          <div class="shop-summary shop-grid--full">
            <h4>Rendel√©si √∂sszegz√©s</h4>
            <div id="orderSummary"></div>
            <div class="shop-summary__total">
              <span>V√©g√∂sszeg:</span> <strong id="orderTotal">0 Ft</strong>
            </div>
          </div>
          <label class="shop-grid--full">
            <input type="checkbox" name="privacy" required />
            Elfogadom az Adatkezel√©si t√°j√©koztat√≥t.
          </label>
        </div>

        <button class="shop-btn shop-btn--primary" type="submit">Rendel√©s lead√°sa</button>
      </form>
    </div>
  </div>

  <script>
    // K√âP MOD√ÅL ‚Äì mindig fixed overlay, nem tolja el a layoutot
    const modal = document.getElementById('imgModal');
    const modalImg = modal?.querySelector('.modal-img');
    const closeBtn = modal?.querySelector('.modal-close');
    if (modal && modalImg && closeBtn){
      document.querySelectorAll('.ref-img').forEach(img=>{
        img.addEventListener('click', ()=>{
          modalImg.src = img.src;
          modal.setAttribute('aria-hidden','false');
          document.body.classList.add('no-scroll');
        });
      });
      closeBtn.addEventListener('click', ()=>{
        modal.setAttribute('aria-hidden','true');
        modalImg.src = '';
        document.body.classList.remove('no-scroll');
      });
      modal.addEventListener('click', (e)=>{
        if(e.target === modal){ closeBtn.click(); }
      });
    }

    // Be√∫sz√°s figyel≈ë (IntersectionObserver)
    const io = new IntersectionObserver((entries)=>{
      entries.forEach(e=>{
        if(e.isIntersecting){ e.target.classList.add('reveal-in'); }
      });
    },{threshold:0.15});
    document.querySelectorAll('.reveal-from-left, .reveal-from-right').forEach(el=>io.observe(el));
  </script>

  <!-- SHOP JS: kos√°r + √∂sszegz√©s + ≈±rlap -->
  <script>
  /* === Egyszer≈± minta term√©kek (0 Ft) ‚Äì val√≥s adatokn√°l csak ezt a t√∂mb√∂t cser√©lj√ºk === */
  const PRODUCTS = [
    { id: "sku-1", name: "Minta term√©k 1", price: 0, img: "https://via.placeholder.com/128" },
    { id: "sku-2", name: "Minta term√©k 2", price: 0, img: "https://via.placeholder.com/128" }
  ];

  /* === Kos√°r √°llapot (localStorage) === */
  const LS_KEY = "shop_cart_v1";
  let cart = JSON.parse(localStorage.getItem(LS_KEY) || "[]");

  const fmt = n => new Intl.NumberFormat("hu-HU").format(n) + " Ft";
  const qS = s => document.querySelector(s);

  function saveCart(){ localStorage.setItem(LS_KEY, JSON.stringify(cart)); updateCartUI(); }
  function addToCart(id, qty=1){
    const item = cart.find(x=>x.id===id);
    if(item){ item.qty += qty; }
    else {
      const p = PRODUCTS.find(x=>x.id===id);
      if(!p) return;
      cart.push({ id:p.id, name:p.name, price:p.price, img:p.img, qty });
    }
    saveCart();
  }
  function removeFromCart(id){ cart = cart.filter(x=>x.id!==id); saveCart(); }
  function changeQty(id, delta){
    const item = cart.find(x=>x.id===id); if(!item) return;
    item.qty = Math.max(1, item.qty + delta); saveCart();
  }
  function cartSubtotal(){ return cart.reduce((s,x)=> s + x.price * x.qty, 0); }

  function updateCartUI(){
    const count = cart.reduce((s,x)=>s+x.qty,0);
    const cntEl = qS("#shopCartCount"); if(cntEl) cntEl.textContent = count;
    const itemsWrap = qS("#shopCartItems");
    if(itemsWrap){
      itemsWrap.innerHTML = cart.length ? cart.map(x=>`
        <div class="shop-cart__item">
          <img src="${x.img}" alt="">
          <div>
            <div class="shop-cart__item-title">${x.name}</div>
            <div>${fmt(x.price)}</div>
            <div class="shop-cart__item-qty">
              <button class="shop-btn shop-btn--ghost" data-dec="${x.id}">‚àí</button>
              <span>${x.qty}</span>
              <button class="shop-btn shop-btn--ghost" data-inc="${x.id}">+</button>
              <button class="shop-btn shop-btn--ghost" data-del="${x.id}" style="margin-left:.5rem">T√∂rl√©s</button>
            </div>
          </div>
          <div><strong>${fmt(x.price * x.qty)}</strong></div>
        </div>
      `).join("") : `<p>√úres a kos√°r.</p>`;
    }
    const subtotalEl = qS("#shopSubtotal"); if(subtotalEl) subtotalEl.textContent = fmt(cartSubtotal());
  }

  function openCart(){ qS(".shop-cart")?.classList.add("shop-cart--open"); }
  function closeCart(){ qS(".shop-cart")?.classList.remove("shop-cart--open"); }
  function openCheckout(){ qS("#shopCheckout")?.classList.add("shop-checkout--open"); }
  function closeCheckout(){ qS("#shopCheckout")?.classList.remove("shop-checkout--open"); }

  document.addEventListener("click", (e)=>{
    const t = e.target;
    if(t.matches(".shop-cart-toggle")) openCart();
    if(t.matches(".shop-cart__close")) closeCart();
    if(t.matches("#shopGoCheckout")){
      closeCart(); renderOrderSummary(); openCheckout();
    }
    if(t.matches(".shop-checkout__close")) closeCheckout();

    if(t.dataset?.inc){ changeQty(t.dataset.inc, +1); }
    if(t.dataset?.dec){ changeQty(t.dataset.dec, -1); }
    if(t.dataset?.del){ removeFromCart(t.dataset.del); }

    const addBtn = t.closest?.("[data-add-to-cart]");
    if(addBtn){
      const id = addBtn.getAttribute("data-id");
      addToCart(id, 1);
    }
  });

  function renderOrderSummary(){
    const wrap = qS("#orderSummary");
    const totalEl = qS("#orderTotal");
    if(!wrap || !totalEl) return;

    const shipping = (qS("#shippingSelect")?.value || "H√°zhozsz√°ll√≠t√°s");
    const shippingCost = shipping === "H√°zhozsz√°ll√≠t√°s" ? 1490 : 0;
    const subtotal = cartSubtotal();
    const total = subtotal + shippingCost;

    wrap.innerHTML = `
      <ul>
        ${cart.map(x=>`<li>${x.name} √ó ${x.qty} ‚Äî ${fmt(x.price * x.qty)}</li>`).join("")}
      </ul>
      <div style="margin-top:.5rem;display:flex;justify-content:space-between">
        <span>Sz√°ll√≠t√°s (${shipping}):</span><strong>${fmt(shippingCost)}</strong>
      </div>
    `;
    totalEl.textContent = fmt(total);

    const hidden = qS("#orderJson");
    if(hidden){
      const order = { items: cart, subtotal, shipping_method: shipping, shipping_cost: shippingCost, total };
      hidden.value = JSON.stringify(order, null, 2);
    }
  }

  document.addEventListener("change", (e)=>{
    if(e.target.id === "shippingSelect"){ renderOrderSummary(); }
  });

  updateCartUI();
  </script>
</body>
</html>
