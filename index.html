<!doctype html>
<html lang="hu">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Sz≈ëke √âpker KFT.</title>
  <link rel="stylesheet" href="styles.css" />
</head>
<body>

  <!-- FEJL√âC (hamburgerrel mobilra) -->
  <header class="site-header">
    <div class="container header-inner">
      <a href="#fooldal" class="brand">
        <img src="logo.png" alt="Sz≈ëke √âpker KFT. log√≥" />
        <span class="brand-text">Sz≈ëke √âpker KFT.</span>
      </a>

      <!-- Hamburger gomb mobilra -->
      <button class="nav-toggle" aria-expanded="false" aria-label="Men√º megnyit√°sa">
        <span></span><span></span><span></span>
      </button>

      <nav class="main-nav">
        <a href="#fooldal">F≈ëoldal</a>
        <a href="#szolgaltatasok">Szolg√°ltat√°sok</a>
        <a href="#rolunk">R√≥lunk</a>
        <a href="#bemutatkozas">Bemutatkoz√°s</a>
        <a href="#referenciak">Referenci√°k</a>
        <!-- √öJ: Nagyobb projektek men√ºpont -->
        <a href="#projektek">Nagyobb projektek</a>
        <a href="#ajanlatkeres">Aj√°nlatk√©r√©s</a>
        <a href="#kapcsolat" class="pill">Kapcsolat</a>
        <!-- K√úL√ñN F√úL: Webshop -->
        <a href="webshop.html" class="pill">Webshop</a>
      </nav>
    </div>
  </header>

  <main>

    <!-- HERO (markol√≥s h√°tt√©r) -->
    <section id="fooldal" class="section hero bg-2">
      <div class="container hero-grid reveal-from-left">
        <div class="hero-copy">
          <span class="chip">Orsz√°g b√°rmely pontj√°n</span>
          <h1>Min≈ës√©g kompromisszumok n√©lk√ºl</h1>
          <p>Gener√°lkivitelez√©s, csal√°di h√°zak √©s t√°rsash√°zak √©p√≠t√©se, fel√∫j√≠t√°sok, homlokzati
            szigetel√©s, t√©rk√∂vez√©s, burkol√°s √©s fest√©s ‚Äì pontos hat√°rid≈ëk, √°tl√°that√≥ aj√°nlat.</p>
          <div class="cta-row">
            <a href="#ajanlatkeres" class="btn primary">Ingyenes aj√°nlatk√©r√©s</a>
            <a href="#referenciak" class="btn">Referenci√°k</a>
          </div>
        </div>
        <div class="hero-media">
          <img src="hero.jpg" alt="Sz≈ëke √âpker csapat munka k√∂zben" class="hero-img"/>
          <img src="logo.png" alt="" class="hero-watermark" />
        </div>
      </div>
    </section>

    <!-- SZOLG√ÅLTAT√ÅSAINK -->
    <section id="szolgaltatasok" class="section">
      <div class="container">
        <h2 class="section-title">Szolg√°ltat√°saink</h2>

        <div class="services">
          <!-- K√ÅRTYA 1 -->
          <div class="service-card reveal-from-right">
            <div class="card-inner">
              <div class="card-face card-front">
                <div class="icon-circle">üß±</div>
                <h3>T√©rk√∂vez√©s √©s burkol√°s</h3>
              </div>
              <div class="card-face card-back">
                <p>Id≈ët√°ll√≥, eszt√©tikus burkolatok k√ºlt√©rre √©s belt√©rre, prec√≠z szintez√©ssel.</p>
                <img src="logo.png" alt="" class="mini-logo" />
              </div>
            </div>
          </div>

          <!-- K√ÅRTYA 2 -->
          <div class="service-card reveal-from-left">
            <div class="card-inner">
              <div class="card-face card-front">
                <div class="icon-circle">üèóÔ∏è</div>
                <h3>Gener√°lkivitelez√©s</h3>
              </div>
              <div class="card-face card-back">
                <p>Teljes projektmenedzsment a tervez√©st≈ël a kulcs√°tad√°sig, dokument√°lt folyamatokkal.</p>
                <img src="logo.png" alt="" class="mini-logo" />
              </div>
            </div>
          </div>

          <!-- K√ÅRTYA 3 -->
          <div class="service-card reveal-from-right">
            <div class="card-inner">
              <div class="card-face card-front">
                <div class="icon-circle">üè†</div>
                <h3>Homlokzati szigetel√©s</h3>
              </div>
              <div class="card-face card-back">
                <p>Energiatakar√©kos, pr√©mium rendszerek gy√°rt√≥i el≈ë√≠r√°sok szerint kivitelezve.</p>
                <img src="logo.png" alt="" class="mini-logo" />
              </div>
            </div>
          </div>

          <!-- K√ÅRTYA 4 -->
          <div class="service-card reveal-from-left">
            <div class="card-inner">
              <div class="card-face card-front">
                <div class="icon-circle">üé®</div>
                <h3>Fest√©s, fel√∫j√≠t√°s</h3>
              </div>
              <div class="card-face card-back">
                <p>Tiszta munkater√ºlet, eszt√©tikus kivitelez√©s, gyors √©s ig√©nyes √°tad√°s.</p>
                <img src="logo.png" alt="" class="mini-logo" />
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- R√ìLUNK -->
    <section id="rolunk" class="section soft-bg bg-1">
      <div class="container reveal-from-right">
        <h2 class="section-title">R√≥lunk</h2>
        <p class="lead">A Sz≈ëke √âpker Kft. megb√≠zhat√≥, lelkiismeretes kivitelez≈ë csapat. Lak√≥- √©s kisebb ipari projektek teljes k√∂r≈± lebonyol√≠t√°s√°t v√°llaljuk az enged√©lyeztet√©st≈ël a kulcs√°tad√°sig.</p>
        <p>Munk√°nk alapja a pontos tervez√©s, a tiszta √©s rendszeres kommunik√°ci√≥, valamint a k√∂vetkezetes min≈ës√©g-ellen≈ërz√©s. Hisz√ºnk abban, hogy a j√≥ kivitelez√©s nem csak a k√©sz falakr√≥l sz√≥l, hanem a g√∂rd√ºl√©keny folyamatr√≥l is.</p>
        <p>√Åtl√°that√≥ aj√°nlatot adunk, √ºtemtervvel √©s m√©rf√∂ldk√∂vekkel. Megrendel≈ëink sz√°m√°ra fot√≥s el≈ërehalad√°s-jelent√©st biztos√≠tunk, √≠gy mindenki pontosan tudja, hol tartunk √©s mi k√∂vetkezik.</p>
      </div>
      <div class="container about-biglogo">
        <img src="logo.png" alt="Sz≈ëke √âpker log√≥ nagyban" />
      </div>
    </section>

    <!-- BEMUTATKOZ√ÅS -->
    <section id="bemutatkozas" class="section bg-3">
      <div class="container two-col reveal-from-left">
        <div class="col media">
          <img src="szoke.jpg" alt="Sz≈ëke Gyula" />
        </div>
        <div class="col copy">
          <h2>Bemutatkoz√°s</h2>
          <p class="lead"><strong>Sz≈ëke Gyula vagyok, a Sz≈ëke √âpker KFT. alap√≠t√≥ja.</strong> C√©lom, hogy a kivitelez√©s minden l√©p√©se √°tl√°that√≥ √©s stresszmentes legyen a megrendel≈ëknek.</p>
          <p>T√∂bb √©ves tapasztalattal √©s √∂sszeszokott csapattal dolgozunk. A projektind√≠t√°st√≥l a kulcs√°tad√°sig r√©szletes √ºtemtervvel haladunk, rendszeres egyeztet√©sekkel √©s dokument√°lt folyamatokkal. K√ºl√∂n figyelmet ford√≠tunk a min≈ës√©g-ellen≈ërz√©sre: be√©p√≠tett anyagok nyomon k√∂vet√©se, munkaf√°zisonk√©nti ellen≈ërz≈ëlista, fot√≥s st√°tuszjelent√©sek.</p>
          <p>Sz√°munkra az <em>egy√©rtelm≈± kommunik√°ci√≥</em> √©s a <em>hat√°rid≈ë-tart√°s</em> alap√©rt√©k. Az aj√°nlat minden t√©tel√©t √©rthet≈ëen magyar√°zzuk, √©s k√∂lts√©ghat√©kony, de tart√≥s megold√°sokat javaslunk.</p>
          <ul>
            <li>t√©teles, √°tl√°that√≥ k√∂lts√©gvet√©s;</li>
            <li>√ºtemterv, m√©rf√∂ldk√∂vek, st√°tuszjelent√©sek;</li>
            <li>pr√©mium, bev√°lt rendszerek gy√°rt√≥i el≈ë√≠r√°s szerint.</li>
          </ul>
        </div>
      </div>
    </section>

    <!-- MI√âRT V√ÅLASSZON MINKET? -->
    <section id="miert" class="section soft-bg">
      <div class="container reveal-from-right">
        <h2 class="section-title">Mi√©rt v√°lasszon minket?</h2>
        <ul class="why-list">
          <li><span class="wicon">üßæ</span><strong>√Åtl√°that√≥ k√∂lts√©gvet√©s:</strong> t√©teles aj√°nlat, rejtett t√©telek n√©lk√ºl.</li>
          <li><span class="wicon">‚è±Ô∏è</span><strong>Hat√°rid≈ë-garancia:</strong> √ºtemterv, m√©rf√∂ldk√∂vek √©s rendszeres st√°tuszjelent√©s.</li>
          <li><span class="wicon">üè∑Ô∏è</span><strong>Pr√©mium anyagok:</strong> ismert rendszerek, gy√°ri el≈ë√≠r√°sok szerint.</li>
          <li><span class="wicon">üë∑</span><strong>Tapasztalt csapat:</strong> bev√°lt, megb√≠zhat√≥ szakemberek.</li>
          <li><span class="wicon">üíº</span><strong>√úzleti szeml√©let:</strong> k√∂lts√©ghat√©kony megold√°sok kompromisszumok n√©lk√ºl.</li>
        </ul>
      </div>
    </section>

    <!-- REFERENCI√ÅK -->
    <section id="referenciak" class="section">
      <div class="container reveal-from-left">
        <h2 class="section-title">Referenci√°k</h2>
        <div class="ref-grid">
          <img src="kep1.jpg" alt="Referencia 1" class="ref-img" />
          <img src="kep2.jpg" alt="Referencia 2" class="ref-img" />
          <img src="kep3.jpg" alt="Referencia 3" class="ref-img" />
          <img src="kep4.jpg" alt="Referencia 4" class="ref-img" />
          <img src="kep5.jpg" alt="Referencia 5" class="ref-img" />
        </div>
      </div>

      <!-- MOD√ÅL -->
      <div class="modal" id="imgModal" aria-hidden="true">
        <button class="modal-close" aria-label="Bez√°r√°s">√ó</button>
        <img src="" alt="Nagy√≠tott k√©p" class="modal-img" />
      </div>
    </section>

    <!-- √öJ: NAGYOBB PROJEKTEK -->
    <section id="projektek" class="section soft-bg">
      <div class="container">
        <h2 class="section-title">Nagyobb projektek</h2>

        <!-- Projekt #1 ‚Äì Kom√°di -->
        <article class="prj-card">
          <figure class="prj-media">
            <img src="komadi-terv.jpg" alt="Kom√°di k√∂z√∂ss√©gi t√©r ‚Äì l√°tv√°nyterv">
            <figcaption class="prj-badge">EU t√°mogat√°s ‚Ä¢ 605 M Ft</figcaption>
          </figure>
          <div class="prj-body">
            <header class="prj-head">
              <h3 class="prj-title">Kom√°di ‚Äì K√∂z√∂ss√©gi t√©r fejleszt√©se</h3>
              <span class="prj-status">üîß Folyamatban</span>
            </header>

            <p class="prj-lead">
              A szabadid≈ë-klub √©p√ºlet√©nek b≈ëv√≠t√©se √∫j fogad√≥t√©rrel, vizesblokkal, n√©z≈ët√©rrel √©s sz√≠npaddal,
              tov√°bb√° √∂lt√∂z≈ëkkel √©s parkol√≥kkal.
            </p>

            <ul class="prj-meta">
              <li>üí∂ <strong>Forr√°s:</strong> EU t√°mogat√°s</li>
              <li>üèóÔ∏è <strong>Kivitelez≈ë:</strong> Sz≈ëke √âpker Kft.</li>
              <li>üìÖ <strong>V√°rhat√≥ befejez√©s:</strong> j√∂v≈ë √©v I. negyed√©v</li>
              <li>üìê <strong>Terjedelem:</strong> b≈ëv√≠t√©s + k√∂z√∂ss√©gi terek</li>
            </ul>

            <button class="prj-toggle" aria-expanded="false" aria-controls="prj1r">R√©szletek</button>
            <div id="prj1r" class="prj-more" hidden>
              <div class="prj-cols">
                <div>
                  <h4>M≈±szaki f≈ëpontok</h4>
                  <ul class="prj-bullets">
                    <li>Sz√≠npad √©s n√©z≈ët√©r kialak√≠t√°s</li>
                    <li>Vizesblokk √©s √∂lt√∂z≈ëk</li>
                    <li>Akad√°lymentes fogad√≥t√©r</li>
                    <li>Parkol√≥helyek √©s k√∂zleked≈ë</li>
                  </ul>
                </div>
                <div>
                  <h4>V√°rosi v√≠zi√≥</h4>
                  <p>Az √∫j k√∂z√∂ss√©gi tengely a k√∂rny√©k √∫j templom√°val egy√ºtt egys√©ges, √©lhet≈ë v√°rosi magot hoz l√©tre.</p>
                </div>
              </div>
            </div>
          </div>
        </article>

        <!-- Sablon tov√°bbi projekthez ‚Äì m√°sold a blokkot
        <article class="prj-card">
          <figure class="prj-media">
            <img src="csarnok.jpg" alt="Ipari csarnok ‚Äì √°tadott projekt">
            <figcaption class="prj-badge">√Åtadva ‚Ä¢ 1,2 Mrd Ft</figcaption>
          </figure>
          <div class="prj-body">
            <header class="prj-head">
              <h3 class="prj-title">Beretty√≥√∫jfalu ‚Äì Ipari csarnok b≈ëv√≠t√©se</h3>
              <span class="prj-status">‚úÖ Befejezett</span>
            </header>
            <p class="prj-lead">√öj gy√°rt√≥t√©r, rakt√°r √©s irodablokk; darup√°lya, ipari padl√≥, korszer≈± g√©p√©szet.</p>
            <ul class="prj-meta">
              <li>üè≠ <strong>Funkci√≥:</strong> Gy√°rt√≥ + rakt√°r</li>
              <li>üìê <strong>Alapter√ºlet:</strong> ~4 500 m¬≤</li>
              <li>ü¶∫ <strong>Speci√°l:</strong> Darup√°lya, ipari padl√≥</li>
              <li>üìÖ <strong>√Åtad√°s:</strong> 2025 Q2</li>
            </ul>
            <button class="prj-toggle" aria-expanded="false" aria-controls="prj2r">R√©szletek</button>
            <div id="prj2r" class="prj-more" hidden>...</div>
          </div>
        </article>
        -->

      </div>
    </section>

    <!-- AJ√ÅNLATK√âR√âS -->
    <section id="ajanlatkeres" class="section soft-bg bg-4">
      <div class="container reveal-from-right">
        <h2 class="section-title">√Åraj√°nlat k√©r√©se</h2>
        <form class="quote">
          <label>N√©v * <input type="text" required placeholder="Ide √≠rd a neved"></label>
          <label>Email * <input type="email" required placeholder="Ide √≠rd az email c√≠med"></label>
          <label>Telefonsz√°m <input type="text" placeholder="Ide √≠rd a telefonsz√°mod (nem k√∂telez≈ë)"></label>
          <label>√úzenet * <textarea required placeholder="√çrd le k√©rlek, pontosan mire szeretn√©l √°raj√°nlatot k√©rni!"></textarea></label>
          <button class="btn primary" type="submit">K√ºld√©s</button>
        </form>
      </div>
    </section>

    <!-- KAPCSOLAT -->
    <section id="kapcsolat" class="section">
      <div class="container reveal-from-left">
        <h2 class="section-title">Kapcsolat</h2>

        <div class="contact-grid">
          <div class="contact-info">
            <img src="logo.png" alt="" class="contact-logo" />
            <p><strong>C√≠m:</strong> 4100 Beretty√≥√∫jfalu, D√≥zsa Gy√∂rgy utca 6 1/3</p>
            <p><strong>Telefon:</strong> +36 70 607 0675</p>
            <p><strong>Email:</strong> info@szoke-epker.com</p>
            <p><strong>Facebook:</strong>
              <a href="https://facebook.com/szokeepkerkft" target="_blank" class="fb-link">
                <span class="fb-ico">f</span> facebook.com/szokeepkerkft
              </a>
            </p>
          </div>
          <div class="contact-map">
            <iframe
              title="T√©rk√©p"
              loading="lazy"
              referrerpolicy="no-referrer-when-downgrade"
              src="https://www.google.com/maps?q=Sz%C5%91ke%20%C3%89pker%20KFT%204100%20Beretty%C3%B3%C3%BAjfalu%20D%C3%B3zsa%20Gy%C3%B6rgy%206%201%2F3&output=embed">
            </iframe>
          </div>
        </div>
      </div>
    </section>

  </main>

  <footer class="site-footer">
    <div class="container">
      <p>¬© 2025 Sz≈ëke √âpker KFT. Minden jog fenntartva.</p>
    </div>
  </footer>

  <script>
    // Hamburger men√º (mobil)
    const navToggle = document.querySelector('.nav-toggle');
    const mainNav   = document.querySelector('.main-nav');
    navToggle?.addEventListener('click', ()=>{
      const open = mainNav.classList.toggle('is-open');
      navToggle.setAttribute('aria-expanded', open ? 'true' : 'false');
    });
    // Men√º z√°r√°sa kattint√°sra mobilon
    mainNav?.addEventListener('click', (e)=>{
      if(e.target.tagName === 'A' && mainNav.classList.contains('is-open')){
        mainNav.classList.remove('is-open');
        navToggle.setAttribute('aria-expanded','false');
      }
    });

    // K√âP MOD√ÅL
    const modal = document.getElementById('imgModal');
    const modalImg = modal.querySelector('.modal-img');
    const closeBtn = modal.querySelector('.modal-close');
    document.querySelectorAll('.ref-img').forEach(img=>{
      img.addEventListener('click', ()=>{
        modalImg.src = img.src;
        modal.setAttribute('aria-hidden','false');
        document.body.classList.add('no-scroll');
      });
    });
    closeBtn.addEventListener('click', ()=>{
      modal.setAttribute('aria-hidden','true');
      modalImg.src = '';
      document.body.classList.remove('no-scroll');
    });
    modal.addEventListener('click', (e)=>{ if(e.target === modal){ closeBtn.click(); } });

    // Be√∫sz√°s figyel≈ë
    const io = new IntersectionObserver((entries)=>{
      entries.forEach(e=>{ if(e.isIntersecting){ e.target.classList.add('reveal-in'); } });
    },{threshold:0.15});
    document.querySelectorAll('.reveal-from-left, .reveal-from-right').forEach(el=>io.observe(el));
  </script>

  <!-- ===== Sz≈ëke √âpker ‚Äì Lebeg≈ë Chat (√ºzleti Q&A) ===== -->
  <div id="chat-fab" aria-label="Chat megnyit√°sa">
    <svg viewBox="0 0 24 24" width="26" height="26" aria-hidden="true">
      <path d="M4 6.5A3.5 3.5 0 0 1 7.5 3h9A3.5 3.5 0 0 1 20 6.5v5A3.5 3.5 0 0 1 16.5 15H12l-4 4v-4H7.5A3.5 3.5 0 0 1 4 11.5v-5Z"/>
    </svg>
    <span class="dot"></span>
  </div>

  <div id="chat-panel" aria-hidden="true">
    <div class="chat-head">
      <div class="chat-brand">
        <img src="logo.png" alt="" />
        <div>
          <strong>Sz≈ëke √âpker ‚Äì Chat</strong>
          <small>√úzleti k√©rd√©sekre v√°laszolok</small>
        </div>
      </div>
      <button class="chat-close" aria-label="Chat bez√°r√°sa">√ó</button>
    </div>
    <div class="chat-body" id="chat-body" role="log" aria-live="polite"></div>
    <form class="chat-form" id="chat-form">
      <input id="chat-input" type="text" placeholder="√çrd ide a k√©rd√©sed‚Ä¶" autocomplete="off" />
      <button class="chat-send" type="submit">K√ºld√©s</button>
    </form>
  </div>

  <script>
  (()=> {
    const ENDPOINT = "/api/chat";
    const LS_CHAT = "szoke_chat_history_v1";
    const LS_WELCOME = "szoke_chat_welcome_v1";

    // NO PERSIST: r√©gi el≈ëzm√©ny t√∂rl√©s, ne haszn√°ljunk localStorage-t a history-ra
    try { localStorage.removeItem(LS_CHAT); } catch(_){}  // CLEAR OLD HISTORY
    let history = [];                          // mem√≥ria-alap√∫ csak a fut√°s idej√©re
    const save = () => {};                     // NO PERSIST: ment√©s kikapcsolva

    const SYS = `Te a "Sz≈ëke √âpker KFT." r√∂vid, kedves √©s seg√≠t≈ëk√©sz √ºzleti asszisztense vagy.
V√°laszolj magyarul, t√∂m√∂ren. Csak √ºzleti t√©m√°k: szolg√°ltat√°sok, folyamat, kapcsolat, webshop, sz√°ll√≠t√°s (1490 Ft, 30 000 Ft felett ingyenes), fizet√©s (csak ut√°nv√©t), rendel√©s email visszaigazol√°s.
√Årakn√°l mondd el, hogy t√∂bb t√©nyez≈ët≈ël f√ºgg √©s ir√°ny√≠ts a #ajanlatkeres r√©szhez.
Ha a k√©rd√©s off-topic, mondd: "√ârtem a k√©rd√©sed, de sajnos csak √ºzleti t√©m√°kban v√°laszolhatok üòö".`;

    const FEW = [
      { role:"user", content:"szia" },
      { role:"assistant", content:"Szia! √ñr√ºl√∂k, hogy √≠rt√°l. Miben seg√≠thetek? Szolg√°ltat√°sok, webshop, sz√°ll√≠t√°s/fizet√©s vagy √°raj√°nlat?" },
      { role:"user", content:"tudok online fizetni?" },
      { role:"assistant", content:"Jelenleg nem, a webshopban csak ut√°nv√©ttel tudsz fizetni. A rendel√©sr≈ël emailt k√ºld√ºnk." },
      { role:"user", content:"mennyi a sz√°ll√≠t√°s?" },
      { role:"assistant", content:"1490 Ft, 30 000 Ft felett ingyenes h√°zhozsz√°ll√≠t√°s." },
      { role:"user", content:"k√©rek √°raj√°nlatot" },
      { role:"assistant", content:"√ñr√∂mmel! Az √°r t√∂bb t√©nyez≈ët≈ël f√ºgg. K√©rlek, add meg az adatokat itt: #ajanlatkeres ‚Äì gyorsan v√°laszolunk." }
    ];

    const fab = document.getElementById('chat-fab');
    const panel = document.getElementById('chat-panel');
    const body  = document.getElementById('chat-body');
    const form  = document.getElementById('chat-form');
    const input = document.getElementById('chat-input');
    const closeBtn = panel.querySelector('.chat-close');

    const scrollBottom = () => body.scrollTop = body.scrollHeight;

    function addMsg(role, html){
      const wrap = document.createElement('div');
      wrap.className = 'msg ' + (role==='user'?'me':'bot');
      wrap.innerHTML = `<div class="bubble">${html}</div>`;
      body.appendChild(wrap);
      scrollBottom();
    }

    function openChat(){
      panel.setAttribute('aria-hidden','false');
      panel.classList.add('on');
      fab.classList.add('off');
      input.focus();
    }
    function closeChat(){
      panel.setAttribute('aria-hidden','true');
      panel.classList.remove('on');
      fab.classList.remove('off');
    }

    fab.addEventListener('click', openChat);
    closeBtn.addEventListener('click', closeChat);

    // els≈ë l√°togat√°s: kedves k√∂sz√∂nt≈ë (LS_WELCOME maradhat)
    window.addEventListener('load', ()=>{
      if(!localStorage.getItem(LS_WELCOME)){
        openChat();
        addMsg('bot','Szia, √ºdv√∂z√∂llek a <strong>Sz≈ëke √âpker</strong> saj√°t chat ablak√°ban! üòä<br>√úzleti k√©rd√©sekben seg√≠tek: szolg√°ltat√°sok, webshop, sz√°ll√≠t√°s/fizet√©s. √Åraj√°nlathoz kattints: <a href="index.html#ajanlatkeres">Aj√°nlatk√©r√©s</a>.');
        localStorage.setItem(LS_WELCOME, '1');
      }
    });

    function fallback(q){
      const s = q.toLowerCase();
      const offer = `<a href="index.html#ajanlatkeres">Aj√°nlatk√©r√©s</a>`;
      if(/szia|hello|hell√≥|j√≥ napot/.test(s)) return "Szia! Miben seg√≠thetek: szolg√°ltat√°sok, webshop, sz√°ll√≠t√°s/fizet√©s vagy √°raj√°nlat?";
      if(/√°r|√°raj|k√∂lts|mennyibe|√°rlista/.test(s)) return `Az √°r t√∂bb t√©nyez≈ët≈ël f√ºgg. K√©rlek, k√ºldd el az ig√©nyt itt: ${offer}.`;
      if(/sz√°ll√≠t|fut√°r|ingyenes/.test(s)) return "Sz√°ll√≠t√°s: 1490 Ft, 30 000 Ft felett ingyenes.";
      if(/fizet|ut√°nv√©t|online|k√°rtya/.test(s)) return "Online fizet√©s jelenleg nem el√©rhet≈ë, **csak ut√°nv√©t**.";
      if(/webshop|rendel|kos√°r/.test(s)) return "A kos√°r tartalma megmarad friss√≠t√©s ut√°n is. Rendel√©s ut√°n emailt k√ºld√ºnk.";
      if(/kapcsolat|telefon|email|el√©rhet/.test(s)) return "+36 70 607 0675 ¬∑ info@szoke-epker.com ¬∑ 4100 Beretty√≥√∫jfalu, D√≥zsa Gy√∂rgy utca 6 1/3.";
      return "√ârtem a k√©rd√©sed, de sajnos csak √ºzleti t√©m√°kban v√°laszolhatok üòö";
    }

    async function askLLM(q){
      const messages = [
        { role:"system", content: SYS.trim() },
        ...FEW,
        ...history.map(m => ({role:m.role, content:m.content})),
        { role:"user", content: q }
      ];
      try{
        const res = await fetch(ENDPOINT, {
          method:"POST",
          headers:{ "Content-Type":"application/json" },
          body: JSON.stringify({ messages })
        });
        if(!res.ok) throw 0;
        const data = await res.json();
        if(!data?.reply) throw 0;
        return data.reply;
      }catch(_){
        return fallback(q);
      }
    }

    form.addEventListener('submit', async e=>{
      e.preventDefault();
      const q = (input.value || "").trim();
      if(!q) return;
      input.value = "";
      addMsg('user', q);
      history.push({role:'user', content:q}); save();   // NO PERSIST

      addMsg('bot', '√çrok‚Ä¶');
      const typing = body.lastElementChild;
      const reply = await askLLM(q);
      typing.remove();
      addMsg('bot', reply);
      history.push({role:'assistant', content:reply}); save(); // NO PERSIST
    });
  })();
  </script>

<!-- === CHAT PATCH (Netlify AI, quick replies, kedves √ºdv√∂zl≈ë, humor) === -->
<script>
(()=> {
  const ENDPOINT = "/.netlify/functions/ai";
  const LS_CHAT = "szoke_chat_history_v1";
  const LS_WELCOME = "szoke_chat_welcome_v2";

  const fab   = document.getElementById('chat-fab');
  const panel = document.getElementById('chat-panel');
  const body  = document.getElementById('chat-body');
  const form  = document.getElementById('chat-form');
  const input = document.getElementById('chat-input');
  const closeBtn = panel?.querySelector('.chat-close');

  if(!fab || !panel || !body || !form || !input){
    console.warn("[chat patch] hi√°nyz√≥ elemek ‚Äì ellen≈ërizd a chat HTML-t"); return;
  }

  // Gyors gomb kont√©ner
  let quick = document.getElementById('chat-quick');
  if(!quick){
    quick = document.createElement('div');
    quick.id = 'chat-quick';
    quick.className = 'chat-quick';
    form.parentNode.insertBefore(quick, form);
  }

  // NO PERSIST: r√©gi el≈ëzm√©ny t√∂rl√©se √©s nincs localStorage haszn√°lat
  try { localStorage.removeItem(LS_CHAT); } catch(_){}  // CLEAR OLD HISTORY
  let history = [];                         // csak mem√≥ri√°ban
  const save = () => {};                    // NO PERSIST

  const scrollBottom = () => body.scrollTop = body.scrollHeight;

  function addMsg(role, html){
    const wrap = document.createElement('div');
    wrap.className = 'msg ' + (role==='user'?'me':'bot');
    wrap.innerHTML = `<div class="bubble">${html}</div>`;
    body.appendChild(wrap); scrollBottom();
  }
  function setQuickReplies(arr){
    quick.innerHTML = (arr && arr.length)
      ? arr.slice(0,4).map(t=>`<button type="button" class="qr">${t}</button>`).join("")
      : "";
  }

  // Nyit/z√°r
  function openChat(){
    panel.setAttribute('aria-hidden','false');
    panel.classList.add('on');
    fab.classList.add('off');
    input.focus();
  }
  function closeChat(){
    panel.setAttribute('aria-hidden','true');
    panel.classList.remove('on');
    fab.classList.remove('off');
  }
  fab.addEventListener('click', openChat);
  closeBtn?.addEventListener('click', closeChat);

  // √údv√∂zl≈ë csak egyszer (ez maradhat)
  window.addEventListener('load', ()=>{
    if(!localStorage.getItem(LS_WELCOME)){
      openChat();
      addMsg('bot','Szia, √ºdv√∂z√∂llek a <strong>Sz≈ëke √âpker</strong> saj√°t chat ablak√°ban! üòä<br>√úzleti k√©rd√©sekben seg√≠tek: szolg√°ltat√°sok, webshop, sz√°ll√≠t√°s/fizet√©s. √Åraj√°nlathoz kattints: <a href="index.html#ajanlatkeres">Aj√°nlatk√©r√©s</a>.');
      setQuickReplies(['Szolg√°ltat√°sok','Sz√°ll√≠t√°s','Fizet√©s','Kapcsolat']);
      localStorage.setItem(LS_WELCOME, '1');
    }
  });

  function fallbackReply(q){
    const s=q.toLowerCase(), offer=`<a href="index.html#ajanlatkeres">Aj√°nlatk√©r√©s</a>`;
    if(/szia|hello|hell√≥|j√≥ napot/.test(s)) return {reply:"Szia! Miben seg√≠thetek: szolg√°ltat√°sok, webshop, sz√°ll√≠t√°s/fizet√©s vagy √°raj√°nlat?", quick_replies:['Szolg√°ltat√°sok','Sz√°ll√≠t√°s','Fizet√©s','Kapcsolat']};
    if(/√°r|√°raj|k√∂lts|mennyibe|√°rlista/.test(s)) return {reply:`Az √°r t√∂bb t√©nyez≈ët≈ël f√ºgg. K√©rlek, k√ºldd el az ig√©nyt itt: ${offer}.`, quick_replies:['Aj√°nlatk√©r√©s','Kapcsolat']};
    if(/sz√°ll√≠t|fut√°r|ingyenes/.test(s)) return {reply:"Sz√°ll√≠t√°s: 1490 Ft, 30 000 Ft felett ingyenes.", quick_replies:['Fizet√©s','Kapcsolat']};
    if(/fizet|ut√°nv√©t|online|k√°rtya/.test(s)) return {reply:"Online fizet√©s jelenleg nem el√©rhet≈ë, csak ut√°nv√©t.", quick_replies:['Sz√°ll√≠t√°s','Aj√°nlatk√©r√©s']};
    if(/kapcsolat|telefon|email|el√©rhet/.test(s)) return {reply:"+36 70 607 0675 ¬∑ info@szoke-epker.com ¬∑ 4100 Beretty√≥√∫jfalu, D√≥zsa Gy√∂rgy utca 6 1/3.", quick_replies:['Telefonh√≠v√°s','E-mail k√ºld√©se','Aj√°nlatk√©r√©s']};
    return {reply:"√ârtem a k√©rd√©sed, de sajnos csak √ºzleti t√©m√°kban v√°laszolhatok üòö", quick_replies:['Aj√°nlatk√©r√©s','Kapcsolat']};
  }

  async function askServer(prompt){
    try{
      const res = await fetch(ENDPOINT, {
        method:"POST",
        headers:{ "Content-Type":"application/json" },
        body: JSON.stringify({ prompt, history: history.slice(-6) })
      });
      if(!res.ok) throw 0;
      const data = await res.json();
      return { reply: data.reply || "Rendben.", quick_replies: data.quick_replies || [] };
    }catch(_){
      return fallbackReply(prompt);
    }
  }

  // Quick reply ‚Üí √≠rja be √©s submitolja a megl√©v≈ë formot
  quick.addEventListener('click', (e)=>{
    const b = e.target.closest('.qr'); if(!b) return;
    input.value = b.textContent.trim();
    form.requestSubmit();
  });

  // Submit kezel√©s (NINCS ment√©s localStorage-ba)
  form.addEventListener('submit', async (e)=>{
    e.preventDefault();
    const q = (input.value || "").trim(); if(!q) return;
    input.value = "";
    addMsg('user', q);
    history.push({role:'user', content:q}); save(); // NO PERSIST

    addMsg('bot','√çrok‚Ä¶'); const typing = body.lastElementChild;
    const { reply, quick_replies } = await askServer(q);
    typing.remove();

    addMsg('bot', reply);
    setQuickReplies(quick_replies);
    history.push({role:'assistant', content:reply}); save(); // NO PERSIST
  });

})();
</script>

<script>
/* === Chat viewport clamp ‚Äì mobil m√©retez√©s JS-biztos√≠t√°ssal === */
(function(){
  const panel = document.getElementById('chat-panel');
  const fab   = document.getElementById('chat-fab');
  const body  = document.getElementById('chat-body');

  if(!panel || !fab) return;

  document.documentElement.style.overflowX = 'hidden';
  document.body.style.overflowX = 'hidden';

  function fitChat(){
    try{
      const vw = Math.max(320, Math.min(window.innerWidth || 360, 1024));
      if (vw <= 700) {
        panel.style.width = 'auto';
        panel.style.maxWidth = 'none';
      } else {
        panel.style.maxWidth = '360px';
        panel.style.width = '360px';
      }
    }catch(_){}
  }

  const open = () => requestAnimationFrame(fitChat);
  fab.addEventListener('click', open);
  window.addEventListener('resize', fitChat, {passive:true});
  window.addEventListener('orientationchange', fitChat);
  document.addEventListener('DOMContentLoaded', fitChat);
  window.addEventListener('load', fitChat);

  if (body && body.childElementCount === 0) {
    requestAnimationFrame(fitChat);
  }
})();
</script>

<!-- ===== PROJEKTEK ‚Äì ST√çLUS (scoped, √ºtk√∂z√©smentes) ===== -->
<style>
  #projektek .prj-card{
    display:grid; grid-template-columns: 1.05fr 1fr; gap:22px;
    background:#fff; border:1px solid #eee; border-radius:18px;
    box-shadow:0 6px 18px rgba(0,0,0,.06); padding:18px; margin-top:18px;
  }
  #projektek .prj-media{ position:relative; border-radius:14px; overflow:hidden; min-height:240px; }
  #projektek .prj-media img{ width:100%; height:100%; object-fit:cover; display:block; }
  #projektek .prj-badge{
    position:absolute; left:12px; bottom:12px; background:#8b5e3c; color:#fff;
    padding:6px 10px; border-radius:999px; font-size:.9rem; box-shadow:0 3px 10px rgba(0,0,0,.2);
  }
  #projektek .prj-head{ display:flex; align-items:center; justify-content:space-between; gap:12px; }
  #projektek .prj-title{ margin:0; font-size:1.3rem; }
  #projektek .prj-status{
    display:inline-flex; align-items:center; gap:6px; color:#065f46; background:#ecfdf5;
    border:1px solid #a7f3d0; padding:4px 8px; border-radius:999px; font-size:.85rem;
  }
  #projektek .prj-lead{ margin:8px 0 12px; line-height:1.6; }
  #projektek .prj-meta{ list-style:none; padding:0; margin:0 0 12px;
    display:grid; grid-template-columns:1fr 1fr; gap:8px 16px; }
  @media (max-width: 680px){ #projektek .prj-meta{ grid-template-columns:1fr; } }
  #projektek .prj-meta li{ display:flex; gap:8px; align-items:center; font-size:.95rem; }
  #projektek .prj-toggle{
    appearance:none; border:1px solid #ddd; background:#fff; padding:8px 12px;
    border-radius:10px; cursor:pointer; font-weight:600;
  }
  #projektek .prj-more{ margin-top:12px; border-top:1px dashed #e5e5e5; padding-top:12px; }
  #projektek .prj-cols{ display:grid; grid-template-columns:1fr 1fr; gap:16px; }
  @media (max-width: 860px){
    #projektek .prj-card{ grid-template-columns:1fr; }
    #projektek .prj-cols{ grid-template-columns:1fr; }
  }
  #projektek .prj-bullets{ margin:8px 0 0 18px; }
</style>

<!-- ===== PROJEKTEK ‚Äì Lenyit√°s JS (scoped) ===== -->
<script>
  (() => {
    const root = document.getElementById('projektek');
    if(!root) return;
    root.addEventListener('click', (e)=>{
      const btn = e.target.closest('.prj-toggle'); if(!btn) return;
      const box = document.getElementById(btn.getAttribute('aria-controls')); if(!box) return;
      const open = btn.getAttribute('aria-expanded') === 'true';
      btn.setAttribute('aria-expanded', String(!open));
      box.hidden = open;
    });
  })();
</script>

</body>
</html>
